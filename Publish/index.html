<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous"
        />
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"
        ></script>

        <title>手机安装BMW Linker小组件指导</title>
    </head>
    <body>
        <h3>手机安装BMW Linker小组件指导</h3>
        <br />
        <br />
        <h5>1. 下载安装 Scriptable App</h5>
        <a class="appStoreLink" href="https://apps.apple.com/cn/app/scriptable/id1405459188" target="_blank">
            <img class="appStore" src="assets/appstore.png" alt="App Store" />
        </a>
        <br />
        <br />
        <h5>2. 点击 复制代码</h5>
        <button type="button" id="copy" onclick="copy()" class="btn btn-success" disabled>复制代码</button>
        <textarea id="js-text-area" rows="20" readonly style="min-width: 400px"></textarea>
        <br />
        <br />
        <h5>3. 点击 打开Scriptable, 点击 ➕，粘贴，运行 ▶️</h5>
        <a id="open" type="button" class="btn btn-info" href="scriptable:///add?scriptName=BMW_LINKER安装器"
            >打开 Scriptable</a
        >
    </body>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #js-text-area {
            display: none;
        }
    </style>
    <script>
        var copyOK = 0;

        function copy() {
            var $temp = $('<input>');
            $('body').append($temp);
            $temp.val($('#js-text-area').val()).select();
            document.execCommand('copy');
            $temp.remove();

            $('#copy').html('复制成功！' + (copyOK > 0 ? '+' + copyOK : ''))
            copyOK++;

            document.getElementById('open').focus();
        }

        $(document).ready(() => {
            $.ajax({
                url: '/Publish/installer.js?date=' + new Date().valueOf(),
                success: (response) => {
                    console.warn(response);
                    $('#js-text-area').val(response);
                    $('#copy').removeAttr('disabled');
                }
            });
        });
    </script>
</html>
